<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="org.gbif.registry.persistence.mapper.MetadataMapper">
  
  <sql id="WRITABLE_METADATA_FIELDS">
    dataset_key,type,version,content,created,created_by,modified,modified_by
  </sql>
  
  <sql id="METADATA_FIELDS">
    key,<include refid="org.gbif.registry.persistence.mapper.MetadataMapper.WRITABLE_METADATA_FIELDS"/>
  </sql>

  <!-- 
    key, created_by and created are never changed
   -->
  <sql id="METADATA_UPDATE">
    dataset_key = #{datasetKey},
    type = #{type}, 
    version = #{version}, 
    content = #{content},
    created = now(), 
    created_by = #{modifiedBy},  
    modified = now(),    
    modified_by = #{modifiedBy}
  </sql>
  
  <sql id="WRITABLE_METADATA_FIELD_TYPES">
    dataset_key = #{datasetKey},
    type = #{type}, 
    version = #{version}, 
    content = #{content},     
    #{createdBy},  
    now(), <!-- created -->    
    #{modifiedBy}, 
    now() <!-- modified -->
  </sql>

</mapper>