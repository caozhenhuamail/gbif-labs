<!DOCTYPE etl SYSTEM "http://scriptella.javaforge.com/dtd/etl.dtd">
<etl>    
	<properties>
		<include href="conf.properties"/>
	</properties>
    <connection id="old-registry" url="${old.registry.url}" user="${old.registry.user}" password="${old.registry.pwd}"/>
    <connection id="new-registry" url="${new.registry.url}" user="${new.registry.user}" password="${new.registry.pwd}"/>        
     
	<script connection-id="new-registry">
		<dialect name="MySql">
			<include href="schemav4.sql"/>
		</dialect>
	</script>

	<query id="nodes" connection-id="old-registry">
		SELECT uuid,name,description,language,iso_country_code,homepage,logoURL,address,city,email,phone,created,modified,deleted FROM agent WHERE type=14000
		<script connection-id="new-registry">
			INSERT INTO node(key,title,description,language,email,phone,homepage,logo_url,address,city,country,created,modified,deleted)
            VALUES (?uuid,?name,?description,?language,?email,?phone,?homepage,?logoURL,?address,?city,?iso_country_code,?created,?modified,?deleted);
		</script>
	</query>
</etl>